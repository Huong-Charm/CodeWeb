<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Heart Particles</title>
    <style>
      body {
        margin: 0;
        background: #000;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
      }
      canvas {
        background: transparent;
      }
    </style>
  </head>
  <body>
    <!-- bảng vẽ -->
    <canvas id="c"></canvas>

    <!-- code JS -->
    <script>
      // lấy canvas và khởi động bút vẽ
      const canvas = document.getElementById("c");
      const ctx = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      const W = canvas.width,
        H = canvas.height;
      const cx = W / 2,
        cy = H / 2;
      const scale = 15;

      // công thức trái tim
      function heartPoint(t) {
        const x = 16 * Math.pow(Math.sin(t), 3);
        const y =
          13 * Math.cos(t) -
          5 * Math.cos(2 * t) -
          2 * Math.cos(3 * t) -
          Math.cos(4 * t);
        return { x, y };
      }

      // tạo hạt
      let particles = [];
      const num = 2000; // càng nhiều càng mịn
      for (let i = 0; i < num; i++) {
        let t = Math.random() * Math.PI * 2;
        let h = heartPoint(t);
        particles.push({
          x: cx + h.x * scale + (Math.random() * 8 - 4),
          y: cy - h.y * scale + (Math.random() * 8 - 4),
          r: Math.random() * 1.5 + 0.5,
          color: `hsl(${Math.random() * 30 + 330},100%,60%)`,
        });
      }

      // vẽ hạt
      function draw() {
        ctx.clearRect(0, 0, W, H);
        particles.forEach((p) => {
          ctx.beginPath();
          ctx.fillStyle = p.color;
          ctx.arc(
            p.x + Math.random() * 1.5 - 0.75,
            p.y + Math.random() * 1.5 - 0.75,
            p.r,
            0,
            Math.PI * 2
          );
          ctx.fill();
        });
      }

      // animation
      function loop() {
        draw();
        requestAnimationFrame(loop);
      }
      loop();
    </script>
  </body>
</html>
